<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detection Result</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Custom CSS -->
  <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />
</head>
<body>
  <div class="container py-5">
    
    <h1 class="text-center mb-4 fw-bold">Detection Result</h1>
    
    <div class="text-center mb-4">
      {% if is_video %}
        <!-- Display annotated video -->
        <video
          class="img-result img-fluid rounded shadow"
          controls
          preload="metadata"
          playsinline
          width="100%"
        >
          <source src="{{ url_for('uploaded_file', filename=annotated_video) }}" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
        <p class="mt-2">
          <a href="{{ url_for('uploaded_file', filename=annotated_video) }}" download class="btn btn-success">
            Download Annotated Video
          </a>
        </p>
      {% elif user_image %}
        <!-- Display annotated image -->
        <img
          src="{{ url_for('uploaded_file', filename=user_image) }}"
          alt="Detection Result"
          class="img-result img-fluid rounded shadow"
        />
      {% else %}
        <p class="text-muted">No media to display.</p>
      {% endif %}
    </div>
    
    {% if not is_video and detected_objects %}
      <h3>Detected Objects</h3>
      <div class="mb-4">
        {% for obj in detected_objects %}
          <span class="badge bg-success me-2 mb-2">{{ obj }}</span>
        {% endfor %}
      </div>
    {% elif not is_video %}
      <p class="text-muted">No objects detected.</p>
    {% endif %}
    
    <div class="text-center">
      <a href="{{ url_for('index') }}" class="btn btn-outline-primary">Try Another Image/Video</a>
    </div>
    
    <footer class="mt-5 text-center text-muted">
      &copy; 2025 Autonomous Vehicle Object Detection
    </footer>
  </div>
</body>
</html>